<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>VOID PDF Renamer</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root { color-scheme: light dark; }
    body { font-family: Arial, sans-serif; margin: 24px; }
    h2 { margin: 0 0 12px; }
    .row { display: flex; gap: 24px; align-items: flex-start; flex-wrap: wrap; }
    .panel { border: 1px solid #aaa; border-radius: 8px; padding: 16px; }
    .dropzone {
      border: 3px dashed #777; border-radius: 10px;
      padding: 40px; text-align: center; cursor: pointer; margin-top: 12px;
    }
    input[type="text"] { width: 520px; max-width: 100%; padding: 10px; font-size: 16px; }
    .preview { width: 420px; max-width: 95vw; }
    .controls { min-width: 320px; }
    .pdf-canvas { width: 100%; background: #f5f5f5; border: 1px solid #ccc; }
    .types { display: grid; gap: 6px; margin: 10px 0; }
    .hint { color:#666; font-size: 0.9rem; margin-top: 6px; }
    .actions { display:flex; gap:10px; margin-top: 10px; }
    button { padding: 10px 16px; font-size: 14px; cursor: pointer; }
    .muted { opacity: 0.6; }
    .counter { font-family: monospace; }
    .hidden { display:none; }
    .error { color:#b00020; margin-top: 6px; }
    .list { margin-top: 12px; font-size: 0.9rem; line-height: 1.4; }
    .badge { display:inline-block; padding:2px 6px; border-radius: 6px; background:#eee; margin-left: 6px; font-size: 0.8rem; }
  </style>
</head>
<body>

<h2>VOID PDF Renamer – Classification Wizard</h2>

<label for="address">Enter Address (exactly as folder name):</label><br/>
<input id="address" type="text" placeholder="e.g. 12 EXAMPLE STREET" /><br/>

<div id="dropzone" class="dropzone panel">Drag a ZIP file here (scanned PDFs supported)</div>

<div id="wizard" class="row hidden" style="margin-top:16px;">
  <!-- LEFT: PDF Preview -->
  <div class="panel preview">
    <div><strong>Preview:</strong> <span id="fileLabel">—</span></div>
    <canvas id="pdfCanvas" class="pdf-canvas" width="420" height="594"></canvas>
    <div class="hint">Showing page 1. If the scan is blank here, the original PDF may be image-only — that’s fine, use the options on the right.</div>
  </div>

  <!-- RIGHT: Controls -->
  <div class="panel controls">
    <div><strong>Step <span id="idx">0</span> of <span id="total">0</span></strong></div>
    <div class="hint">Choose what this PDF is. If “Work Order”, type the description (we UPPERCASE & remove punctuation).</div>

    <div class="types">
      <label><input type="radio" name="kind" value="CHECKLIST"> Inspection Checklist</label>
      <label><input type="radio" name="kind" value="MTW"> AC GOLD MTW</label>
      <label><input type="radio" name="kind" value="RECHARGE"> Rechargeable Works</label>
      <label><input type="radio" name="kind" value="BMD"> BMD Works</label>
      <label><input type="radio" name="kind" value="WORK_ORDER"> Work Order Request</label>
      <label><input type="radio" name="kind" value="SKIP"> Skip this file</label>
    </div>

    <div id="descWrap" class="hidden">
      <label for="desc">Work Order – Description of works required:</label><br/>
      <input id="desc" type="text" placeholder="e.g. REPLACE KITCHEN TAPS" />
      <div class="hint">We will convert to UPPERCASE and remove punctuation automatically.</div>
    </div>

    <div class="actions">
      <button id="prevBtn" class="muted">◀ Back</button>
      <button id="nextBtn">Next ▶</button>
      <button id="finishBtn" class="hidden">Finish & Download ZIP</button>
    </div>

    <div class="list">
      <div>MTW count so far: <span class="counter" id="mtwCount">0</span></div>
      <div>BMD count so far: <span class="counter" id="bmdCount">0</span></div>
    </div>

    <div id="err" class="error hidden"></div>
  </div>
</div>

<!-- PDF.js ES Module (loaded first) -->
<script type="module">
  import * as pdfjsLib from './pdf.mjs';
  window.pdfjsLib = pdfjsLib;
  // IMPORTANT: you have pdf.worker.mjs in the same folder
  pdfjsLib.GlobalWorkerOptions.workerSrc = './pdf.worker.mjs';
</script>

<!-- JSZip (UMD) -->
<script src="./jszip.min.js"></script>

<!-- App logic -->
<script src="./script.js"></script>

</body>
</html>
